<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zak-AI | Unfiltered Genius</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body { background-color: #020617; color: white; font-family: ui-sans-serif, system-ui; margin: 0; }
        .red-glow { text-shadow: 0 0 10px rgba(239, 68, 68, 0.5); }
    </style>
</head>
<body>
    <div id="root">
        <div style="padding: 50px; text-align: center;">
            <h2 style="color: #ef4444;">System Boot Failure</h2>
            <p>If you see this, your browser is blocking the scripts needed to run Zak-AI.</p>
        </div>
    </div>

    <script type="text/babel">
        function App() {
            const [messages, setMessages] = React.useState([]);
            const [input, setInput] = React.useState("");
            const [loading, setLoading] = React.useState(false);

            const handleSend = async () => {
                const key = localStorage.getItem('zak_key') || prompt("Enter Gemini API Key:");
                if (!key) return;
                localStorage.setItem('zak_key', key);

                const newMessages = [...messages, { role: 'user', content: input }];
                setMessages(newMessages);
                setInput("");
                setLoading(true);

                try {
                    const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${key}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: `Instruction: You are Zak-AI, a rude genius. User: ${input}` }] }]
                        })
                    });
                    const data = await res.json();
                    const text = data.candidates[0].content.parts[0].text;
                    setMessages([...newMessages, { role: 'assistant', content: text }]);
                } catch (e) {
                    alert("Error: Zak is having a stroke (or your key is bad).");
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="flex flex-col h-screen max-w-2xl mx-auto p-4">
                    <header className="py-10 text-center border-b border-red-900/20">
                        <h1 className="text-5xl font-black text-red-600 italic tracking-tighter red-glow">ZAK-AI</h1>
                    </header>
                    
                    <div className="flex-1 overflow-y-auto py-6 space-y-4">
                        {messages.map((m, i) => (
                            <div key={i} className={`p-4 rounded-xl ${m.role === 'user' ? 'bg-slate-800 ml-8' : 'bg-red-900/10 border border-red-900/30 mr-8'}`}>
                                <div className="text-[10px] font-bold text-red-500 uppercase mb-1">{m.role}</div>
                                <div className="text-slate-200">{m.content}</div>
                            </div>
                        ))}
                        {loading && <div className="text-red-500 animate-pulse italic">Zak is thinking of a witty insult...</div>}
                    </div>

                    <div className="flex gap-2 p-4 bg-slate-900 rounded-2xl border border-slate-800">
                        <input 
                            className="flex-1 bg-transparent outline-none text-white"
                            placeholder="Type something smart, if you can..."
                            value={input}
                            onChange={(e) => setInput(e.target.value)}
                            onKeyDown={(e) => e.key === 'Enter' && handleSend()}
                        />
                        <button onClick={handleSend} className="bg-red-600 px-6 py-2 rounded-lg font-bold hover:bg-red-500 transition-colors">SEND</button>
                    </div>
                    <p className="text-[10px] text-center text-slate-700 mt-2">Â© ZAK-AI | NO APOLOGIES</p>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
